---
title: "About Transactions"
sidebarTitle: "Overview"
description: "Learn how transactions are recorded and processed in Blnk"
"og:title": "About Transactions • Blnk Developer Documentation"
"og:description": "Learn how to record and track transactions in Blnk."
---

import NeedHelp from "/snippets/need-help.mdx";

## Overview

Transactions enable money movement between two or more balances. These can be payments, transfers, settlements, internal treasury management, etc. All transactions in Blnk are recorded with the [double entry principle](/resources/double-entry) — every transaction has a source and a corresponding destination.

Transactions happen between balances, and [balances are created](/balances/introduction) within [ledgers](/ledgers/introduction).

In this guide, you'll learn about:

1. [Transaction properties](#transaction-properties)
2. [Recording a transaction](#recording-a-transaction)
3. [Verifying transactions](#verifying-transactions)

---

## Transaction properties

1. **Immutability:** Once recorded, transactions in Blnk cannot be modified or deleted. This fundamental property ensures the integrity and reliability of your transaction history, preventing any unauthorized alterations. See also: [Transaction hashing](/advanced/transaction-hashing)

2. **Idempotency:** Each transaction in Blnk produces the same result whether executed once or multiple times. This is crucial for maintaining data consistency, especially during network failures or system retries.
  
    <Warning>
      Blnk implements idempotency by requiring a unique `reference` for every transaction. This reference serves as a transaction identifier, preventing duplicate processing and ensuring consistent outcomes.
    </Warning>

---

## Recording a transaction

To record a transaction, call the **record-transaction** endpoint: 

```
POST http://YOUR_BLNK_INSTANCE_URL/transactions
```

With the following request body:

<CodeGroup>
```bash Request {11}
curl -X POST "http://YOUR_BLNK_INSTANCE_URL/transactions" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 750,
    "reference": "ref_001adcfgf",
    "currency": "USD",
    "precision": 100,
    "source": "@FundingPool",
    "destination": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
    "description": "Fund with starting balance amount",
    "allow_overdraft": true,
    "skip_queue": false,
    "meta_data": {}
  }'
```
```json Response
{
    "id": "txn_6164573b-6cc8-45a4-ad2e-7b4ba6a60f7d",
    "source": "@FundingPool",
    "destination": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
    "reference": "ref_001adcfgf",
    "amount": 750,
    "precision": 100,
    "precise_amount": 75000,
    "currency": "USD",
    "description": "Fund with starting balance amount",
    "status": "QUEUED",
    "created_at": "2024-12-21T01:36:46.997063436Z",
    "meta_data": {
      "sender_name": "John Doe",
      "sender_account": "00000000000"
    }
}
```
</CodeGroup>

<Tip>
If this is your first transaction, the participating balances will start at 0. To ensure the transaction is successful, enable overdrafts as shown above, allowing the source balance to go negative.

Learn more about [Overdrafts](/transactions/overdrafts) and [Negative Balances](/resources/negative-balances).
</Tip>

<Tabs>
    <Tab title="Request">
        | Field | Description | Required | Type
        | --- | --- | --- | ---
        | `amount` | The transaction amount.| Yes | `float`
        | `reference` | Your unique reference to ensure idempotency. | Yes | `string`
        | `currency` | Short code for your asset class. | Yes | `string`
        | `precision` | Precision for the currency/asset passed. See also: [Precision](/transactions/precision) | No | `int64`
        | `source`| Sender's balance ID | Yes | `string`
        | `destination`| Recipient's balance ID. | Yes | `string`
        | `description`| Description or narration of the transaction. | No | `string`
        | `meta_data` | Custom data associated with the transaction | No | `object`
    </Tab>
    <Tab title="Response">
        | Field | Description | Type
        | --- | --- | --- |
        | `amount` | The transaction amount.| Yes | `float`
        | `reference` | Your unique reference to ensure idempotency. | Yes | `string`
        | `currency` | Short code for your asset class. | Yes | `string`
        | `precision` | Precision for the currency/asset passed. See also: [Precision](/transactions/precision) | No | `int64`
        | `source`| Sender's balance ID | Yes | `string`
        | `destination`| Recipient's balance ID. | Yes | `string`
        | `description`| Description or narration of the transaction. | No | `string`
        | `meta_data` | Custom data associated with the transaction | No | `object`
        |`id`| Unique id for the transaction. This is generated by Blnk. | `string`
        | `precise_amount` | The transaction amount recorded after the `precision` value has been applied. See also: [Precision](/transactions/precision) | `integer`
        | `status`| Current state of your transaction record. See also: [Transaction statuses](/transactions/transaction-lifecycle#statuses) | `string`
        |`created_at`| Date and time of the transaction record. | `string`
    </Tab>
</Tabs>

<Tip>
  Passing detailed data with the `meta_data` object is encouraged; it provides you with 360-degree insights about each transaction record. Examples of data you can pass include `sender_name`, `account_number`, `bank_name`, `receiver_name`, `payment_id`, `ip_address`, `location`, `payment_method`, etc.
</Tip>

Next, you can view a list of all transactions in your ledger:

```bash bash
blnk transactions list
```

---

## Verifying transactions

After recording a transaction, you can verify its status using different methods depending on whether you're using the default queue system or the skip queue feature.

### Verifying transactions with queue (default)

When using the default queue system, every transaction starts as `QUEUED`. To verify your transaction status, you have two options:

1. **Webhooks**: Blnk sends [webhook notifications](/advanced/notifications) when transaction states change.
2. **Direct API calls**: Query the transaction status using the reference or transaction ID. See below: <br/>
    <Tabs>
      <Tab title="By reference (direct endpoint)">
        Blnk appends a `_q` suffix to your original reference after processing a `QUEUED` transaction. To verify the updated status, retrieve the transaction using your original reference plus the `_q` suffix.

        ```bash
        curl -X GET "http://YOUR_BLNK_INSTANCE_URL/transactions/reference/{reference}" \
          -H "X-blnk-key: <api-key>"
        ```
      </Tab>
      <Tab title="By reference (search)">
        Use the **Search API** to look up your transaction by reference. If the transaction exists, the response will include its current status.

        ```bash
        curl -X POST "http://YOUR_BLNK_INSTANCE_URL/search/transactions" \
          -H "Content-Type: application/json" \
          -d '{
            "q": "<transaction-reference>",
            "query_by": "reference"
          }'
        ```
      </Tab>
      <Tab title="By transaction ID">
        To check the updated status, take the queued transaction ID and search with it as the `parent_transaction`. This is because Blnk treats the queued transaction as the parent for the next transaction state. See also: [Transaction lifecycle](/transactions/transaction-lifecycle)

        ```bash
        curl -X POST "http://YOUR_BLNK_INSTANCE_URL/search/transactions" \
          -H "Content-Type: application/json" \
          -d '{
            "q": "<queued-transaction-id>",
            "query_by": "parent_transaction"
          }'
        ```
      </Tab>
    </Tabs>

### Verifying transactions without queue (skip queue)

When using `skip_queue: true`, transactions are processed immediately and you can verify them from the direct response. Learn more about [skip queue](/transactions/transaction-lifecycle#skip-transaction-queue).

<CodeGroup>
```bash cURL {12}
curl -X POST "http://YOUR_BLNK_INSTANCE_URL/transactions" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 750,
    "reference": "ref_001adcfgf",
    "currency": "USD",
    "precision": 100,
    "source": "@FundingPool",
    "destination": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
    "description": "Fund with starting balance amount",
    "allow_overdraft": true,
    "skip_queue": true
  }'
```
```json Response {11}
{
  "id": "txn_6164573b-6cc8-45d4-ad2e-7b4ba6a60f7d",
  "source": "@FundingPool",
  "destination": "bln_ebcd230f-6265-4d4a-a4ca-45974c47f746",
  "reference": "ref_001adcfgf",
  "amount": 750,
  "precision": 100,
  "precise_amount": 75000,
  "currency": "USD",
  "description": "Fund with starting balance amount",
  "status": "APPLIED",
  "created_at": "2024-12-21T01:36:46.997063436Z",
  "meta_data": {}
}
```
</CodeGroup>

The response immediately shows the final status (`INFLIGHT`, `APPLIED`, or `REJECTED`), allowing you to confirm the transaction result without waiting for webhooks or additional API calls.

<Warning>
When using `skip_queue: true`, you may encounter lock errors if multiple transactions are processed simultaneously on the same balance. Learn how to handle these scenarios in our [Handling Hot Balances](/guides/hot-balances) guide.
</Warning>

---

## Discarded transactions

A discarded transaction is not recorded in the ledger. Blnk discards transactions for one reason:

1. **Duplicate reference:** Your new transaction `reference` matches an existing `reference` in your ledger. Blnk requires unique `reference` values per transaction. Options are timestamps (e.g. UNIX timestamp), random string or UUID (e.g. `ref_e55c4f33-bff7-4c30-9b9f-5d2d10a29b7a`), or a business identifier like an `order_id`.

<Tip>Make sure your request body match the Blnk Ledger API specifications. For example, avoid passing `apply_overdraft` instead of `allow_overdraft`.</Tip>

---

## Managing insufficient funds

<Info>
Available in version 0.11.0 and later. For versions 0.10.8 and older, see our [insufficient funds guide](/guides/insufficient-funds).
</Info>

Blnk performs comprehensive balance checks before processing any transaction to ensure you have sufficient funds available. The system computes an available balance by calculating `balance - inflight_debit_balance` on the source balance. 

<Info>
  Inflight debit balance is the amount waiting to be deducted from the source balance from inflight transactions. Learn more: [Inflight transactions](/transactions/inflight).
</Info>

If the transaction amount is more than the available balance, the source has insufficient funds and:

1. The transaction is rejected and status is recorded as `REJECTED`.
2. A webhook notification to inform your system of the rejected transaction and a reason in its `meta_data`.


### Using overdrafts

If you want a transaction to proceed even when it exceeds the available balance, you can enable overdrafts by setting `allow_overdraft: true` in your transaction request.

<Card title="Learn about overdrafts" icon="credit-card" href="/transactions/overdrafts">
  Detailed guide on managing overdrafts and negative balances
</Card>

---

## Dive deeper

<CardGroup>
  <Card title="Transaction lifecycle" icon="arrows-spin" href="/transactions/transaction-lifecycle">
    Learn how transactions move through different states from creation to completion
  </Card>
  <Card title="Understanding precision" icon="bullseye" href="/transactions/precision">
    Master decimal handling and precision for accurate financial calculations
  </Card>
  <Card title="Transaction statuses" icon="tag" href="/transactions/transaction-lifecycle#statuses">
    Understand what each transaction status means and when they occur
  </Card>
</CardGroup>

---

<NeedHelp />